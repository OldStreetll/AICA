<UserControl x:Class="AICA.ToolWindows.ChatToolWindowControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:vsshell="clr-namespace:Microsoft.VisualStudio.Shell;assembly=Microsoft.VisualStudio.Shell.15.0"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="400"
             Background="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowBackgroundKey}}"
             Foreground="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowTextKey}}">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" BorderBrush="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowBorderKey}}" 
                BorderThickness="0,0,0,1" Padding="10,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="AICA - AI Coding Assistant" 
                           FontWeight="SemiBold" FontSize="14"
                           VerticalAlignment="Center" />
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="ClearButton" Content="Clear" Padding="8,4" Margin="4,0"
                            Click="ClearButton_Click" />
                    <Button x:Name="SettingsButton" Content="⚙" Padding="8,4"
                            Click="SettingsButton_Click" ToolTip="Settings" />
                </StackPanel>
            </Grid>
        </Border>

        <!-- Warning Banner -->
        <Border x:Name="WarningBanner" Grid.Row="1" Visibility="Collapsed"
                Background="#332200" BorderBrush="#AA7700" BorderThickness="0,0,0,1" Padding="10,6">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="⚠" FontSize="14" Margin="0,0,6,0" 
                           Foreground="#FFAA00" VerticalAlignment="Top" />
                <TextBlock x:Name="WarningText" Grid.Column="1" TextWrapping="Wrap" 
                           Foreground="#FFCC44" FontSize="12" />
            </Grid>
        </Border>

        <!-- Chat Content -->
        <WebBrowser x:Name="ChatBrowser" Grid.Row="2" />

        <!-- Input Area -->
        <Border Grid.Row="3" BorderBrush="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowBorderKey}}" 
                BorderThickness="0,1,0,0" Padding="8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                
                <TextBox x:Name="InputTextBox" Grid.Column="0" 
                         AcceptsReturn="True" TextWrapping="Wrap"
                         MaxHeight="120" MinHeight="60"
                         VerticalScrollBarVisibility="Auto"
                         KeyDown="InputTextBox_KeyDown"
                         Padding="8"
                         Background="{DynamicResource {x:Static vsshell:VsBrushes.ComboBoxBackgroundKey}}"
                         Foreground="{DynamicResource {x:Static vsshell:VsBrushes.ToolWindowTextKey}}"
                         BorderBrush="{DynamicResource {x:Static vsshell:VsBrushes.ComboBoxBorderKey}}" />
                
                <Button x:Name="SendButton" Grid.Column="1" 
                        Content="Send" Padding="16,8" Margin="8,0,0,0"
                        VerticalAlignment="Bottom"
                        Click="SendButton_Click" />
            </Grid>
        </Border>
    </Grid>
</UserControl>
